"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[477],{8477:(E,b,l)=>{l.r(b),l.d(b,{ImoveisModule:()=>M});var c=l(6771),A=l(906),n=l(433),e=l(8256),x=l(1481),_=l(4766),Z=l(529);let d=(()=>{class o{constructor(t){this._http=t,this.URL=_.N.host,this.URL=`${this.URL}/api/imoveis`}create(t){return this._http.post(this.URL,t)}read(){return this._http.get(`${this.URL}`)}readId(t){return this._http.get(`${this.URL}/${t}`)}update(t,i){return this._http.put(`${this.URL}/${t}`,i)}delete(t){return this._http.delete(`${this.URL}/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Z.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var u=l(6895),C=l(5957),f=l(2143),p=l(8706),y=l(7533);const F=["fileList"];function q(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e._uU(1),e.TgZ(2,"div",18)(3,"span",19),e._uU(4),e.qZA(),e._uU(5," \xa0 "),e.TgZ(6,"a",20),e._UZ(7,"i",21),e.qZA(),e._uU(8," \xa0 "),e.TgZ(9,"button",22),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.remove(a))}),e._UZ(10,"i",23),e.qZA()()()}if(2&o){const t=s.$implicit,i=e.oxw();e.xp6(1),e.hij(" ",t.arquivo," "),e.xp6(3),e.hij(" ",i.sizeToMegaByte(t.size)," "),e.xp6(2),e.Q6J("href",t.url,e.LSH)}}let U=(()=>{class o{constructor(t,i,r,a,m){this._sanitizer=t,this._imoveisService=i,this._location=r,this._notificationService=a,this._activatedRouter=m,this.subtitle="Cadastro de Im\xf3veis",this.typeFilse=["image/png","image/jpg","image/jpeg"],this.files=[]}ngOnInit(){this.form=new n.cw({name:new n.NI(void 0,{validators:[n.kI.required]}),value:new n.NI(void 0,{validators:[n.kI.required]}),picture:new n.NI(void 0,{validators:[n.kI.required]}),namePic:new n.NI(void 0,{validators:[n.kI.required]})}),this.id=this._activatedRouter.snapshot.params.id||0,this.id>0&&(this.buscarDados(),this.subtitle="Atualizar cadastro")}buscarDados(){this._imoveisService.readId(this.id).subscribe(t=>{this.form.controls.name.setValue(t.name),this.form.controls.value.setValue(t.value),this.form.controls.picture.setValue(t.picture),this.form.controls.namePic.setValue(t.namePic);const i=this.base64ToBlob(t.picture),r=URL.createObjectURL(i);this.files.push({conteudo:t.picture,arquivo:this.formatFileName(t.namePic||""),url:this._sanitizer.bypassSecurityTrustUrl(r),size:i.size,fileName:t.namePic})})}base64ToBlob(t,i="image/png",r=512){const a=Array.from(atob(t)),m=new Array(Math.ceil(a.length/r)),g=[];for(let h=0;h<m.length;h++)g.push(new Uint8Array(a.slice(h*r,r*(h+1)).map(B=>B.charCodeAt(0))));return new Blob(g,{type:i})}submit(){this.id>0?this.update():this.novo()}update(){this._imoveisService.update(this.id,this.form.value).subscribe(t=>{this._notificationService.notify(t.msg),this._location.back()})}novo(){this._imoveisService.create(this.form.value).subscribe(t=>{this._notificationService.notify(t.msg),this._location.back()})}readFile(t){const i=t.target.files;for(let r=0;r<i.length;r++)this.typeFilse.includes(i[r].type)?this.anexar(i,r):this.msgError="Extens\xe3o n\xe3o \xe9 aceita. Extens\xe3o aceita \xe9 JPG e PNG"}anexar(t,i){let r=new FileReader;r.onload=a=>{const m=window.URL.createObjectURL(new Blob(t,{type:t[0].type}));this.files.find(I=>I.fileName==t[i].name)||(this.files.push({conteudo:a.target?.result?.toString().split("base64")[1],arquivo:this.formatFileName(t[i].name),url:this._sanitizer.bypassSecurityTrustUrl(m),size:t[i].size,fileName:t[i].name}),this.form.controls.picture.setValue(this.files[i].conteudo),this.form.controls.namePic.setValue(this.files[i].fileName),this.fileList.nativeElement.value="")},r.readAsDataURL(t[i])}formatFileName(t){const i=t.split("."),r=i[0],a=i[1];return r.length>=15?`${r.substring(0,5)}...${r.substring(r.length-5,r.length)}.${a}`:t}sizeToMegaByte(t,i=2){return`${(t/1048576).toFixed(i)}MB`}remove(t){const i=this.files[t];this.files.splice(t,1),this.fileList.nativeElement.value="";const r=this.files.findIndex(a=>a.fileName==i.fileName);r>-1&&this.files.splice(r,1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.H7),e.Y36(d),e.Y36(u.Ye),e.Y36(C.g),e.Y36(c.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-form-imoveis"]],viewQuery:function(t,i){if(1&t&&e.Gf(F,5),2&t){let r;e.iGM(r=e.CRH())&&(i.fileList=r.first)}},decls:32,vars:5,consts:[["title","Im\xf3veis",3,"subtitle"],["title",""],[1,"col-md-6"],["role","form",3,"formGroup","submit"],[1,"box-body"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","placeholder","Digite o nome","formControlName","name",1,"form-control"],["type","text","prefix","R$ ","mask","separator.2","thousandSeparator",".","placeholder","Digite o valor","formControlName","value",1,"form-control"],[1,"text-danger"],[1,"form-group-file"],["type","file","accept","image/jpeg,image/pjpeg,image/png",1,"form-control-file",3,"change"],["fileList",""],[1,"list-group-flush"],["class","list-group-item d-flex align-items-center",4,"ngFor","ngForOf"],[1,"box-footer"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"list-group-item","d-flex","align-items-center"],[1,"pull-right"],[1,"ml-auto"],["target","_blank",1,"btn",3,"href"],[1,"fa","fa-eye"],[1,"btn",3,"click"],[1,"fa","fa-trash"]],template:function(t,i){1&t&&(e._UZ(0,"app-bradcrumb",0),e.TgZ(1,"app-body",1)(2,"div",2)(3,"form",3),e.NdJ("submit",function(){return i.submit()}),e.TgZ(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"Nome"),e.qZA(),e._UZ(8,"input",7),e.qZA(),e.TgZ(9,"div",5)(10,"label",6),e._uU(11,"Valor"),e.qZA(),e._UZ(12,"input",8),e.qZA(),e.TgZ(13,"div")(14,"div",9),e._uU(15),e.qZA(),e.TgZ(16,"div",10)(17,"h4"),e._uU(18,"Anexar arquivos"),e.qZA(),e.TgZ(19,"input",11,12),e.NdJ("change",function(a){return i.readFile(a)}),e.qZA(),e.TgZ(21,"label",6),e._uU(22,"Clique ou arraste o arquivo"),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"small"),e._uU(25,"Somente aceito JPG ou PNG"),e.qZA()(),e.TgZ(26,"div")(27,"ul",13),e.YNc(28,q,11,3,"li",14),e.qZA()()()(),e.TgZ(29,"div",15)(30,"button",16),e._uU(31,"Submit"),e.qZA()()()()()),2&t&&(e.Q6J("subtitle",i.subtitle),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(12),e.hij(" ",i.msgError," "),e.xp6(13),e.Q6J("ngForOf",i.files),e.xp6(2),e.Q6J("disabled",i.form.invalid))},dependencies:[f.O,p.y,u.sg,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,y.hx],styles:[".form-group-file[_ngcontent-%COMP%]{display:block;cursor:pointer;position:relative;text-align:center;background-color:#fff;padding:2rem;border:1px dashed #9194a1;transition:all .3s cubic-bezier(.25,.8,.25,1);border-radius:4px}.form-group-file[_ngcontent-%COMP%]   .form-control-file[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;outline:0;opacity:0;top:0;left:0}.list-group-flush[_ngcontent-%COMP%]{border-radius:0}.list-group-flush[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{border-width:0 0 2px}.list-group-item[_ngcontent-%COMP%]:first-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.list-group-item[_ngcontent-%COMP%]:first-child{border-top-right-radius:inherit;border-top-left-radius:inherit}.d-flex-align[_ngcontent-%COMP%]{flex:1 1 auto}.align-items-center[_ngcontent-%COMP%]{align-items:center}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}"]}),o})();var N=l(5226),v=l.n(N);const S=function(o){return["/imoveis/edit",o]},L=function(o){return["/imoveis/buy",o]};function O(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td")(7,"a",4),e._UZ(8,"i",5),e.qZA(),e._uU(9," \xa0 "),e.TgZ(10,"i",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.perguntaRemover(a))}),e.qZA(),e._uU(11," \xa0 "),e.TgZ(12,"a",4),e._UZ(13,"i",7),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(5,4,t.value,"BRL")),e.xp6(3),e.Q6J("routerLink",e.VKq(7,S,t.id)),e.xp6(5),e.Q6J("routerLink",e.VKq(9,L,t.id))}}const R=function(){return["/imoveis/cad"]};let w=(()=>{class o{constructor(t){this._imoveisService=t,this.imoveis=[]}ngOnInit(){setTimeout(()=>{this.getAll()},500)}getAll(){this._imoveisService.read().subscribe(t=>{this.imoveis=t})}perguntaRemover(t){const i=t.id||0;v().fire({title:"Aten\xe7\xe3o?",text:`Deseja realmente remover ${t.name}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, delete-o!",cancelButtonText:"N\xe3o",preConfirm:()=>this.remover(i),allowOutsideClick:()=>!v().isLoading()}).then(r=>{r.isConfirmed&&(setTimeout(()=>{this.getAll()},500),v().fire("Removido!","Usu\xe1rio removido com sucesso","success"))})}remover(t){return new Promise((i,r)=>{this._imoveisService.delete(t).subscribe(()=>{i(!0)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-imoveis"]],decls:10,vars:3,consts:[["title","Im\xf3veis","subtitle","Gerenciamento de im\xf3veis"],["title","",3,"incluir"],[1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"routerLink"],["title","Editar",1,"text-warning","fa","fa-edit"],["title","Remover",1,"remover","text-danger","fa","fa-remove",3,"click"],["title","Compra e venda",1,"text-warning","fa","fa-bars"]],template:function(t,i){1&t&&(e._UZ(0,"app-bradcrumb",0),e.TgZ(1,"app-body",1)(2,"table",2)(3,"thead")(4,"th"),e._uU(5,"Nome"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Valor"),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,O,14,11,"tr",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("incluir",e.DdM(2,R)),e.xp6(8),e.Q6J("ngForOf",i.imoveis))},dependencies:[f.O,p.y,u.sg,c.yS,u.H9]}),o})(),T=(()=>{class o{constructor(t){this._http=t,this.URL=_.N.host,this.URL=`${this.URL}/buy-sell`}create(t){return this._http.post(this.URL,t)}read(t){return this._http.get(`${this.URL}/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Z.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function V(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"currency"),e.qZA()()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.nameUser),e.xp6(2),e.Oqu(t.cliente),e.xp6(2),e.Oqu("C"==t.acao?"Compra":"Venda"),e.xp6(2),e.Oqu(e.xi3(9,4,t.value,"BRL"))}}const J=function(o){return["/imoveis/buy-sell",o]},Y=[{path:"",component:w},{path:"cad",component:U},{path:"edit/:id",component:U},{path:"buy/:id",component:(()=>{class o{constructor(t,i,r){this._imovelService=t,this._compraVendaService=i,this._activateRouter=r,this.compras=[]}ngOnInit(){this.id=this._activateRouter.snapshot.params.id,setTimeout(()=>{this.buscarImovel(),this.buscar()},500)}buscarImovel(){this._imovelService.readId(this.id).subscribe(t=>{this.imovel=t,this.nome=this.imovel.name})}buscar(){this._compraVendaService.read(this.id).subscribe(t=>{this.compras=t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d),e.Y36(T),e.Y36(c.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-compra-venda"]],decls:26,vars:5,consts:[["title","Im\xf3veis","subtitle","Compra e Venda"],[1,"content"],[1,"row"],[1,"col-md-12"],[1,"box"],[1,"box-header","with-border"],[1,"box-tools"],[1,"btn","btn-success",3,"routerLink"],[1,"box-body"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(e._UZ(0,"app-bradcrumb",0),e.TgZ(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),e._uU(7,"Im\xf3veis | Compra ou Venda | "),e.TgZ(8,"strong"),e._uU(9),e.qZA()(),e.TgZ(10,"div",6)(11,"a",7),e._uU(12," Comprar ou vender "),e.qZA()()(),e.TgZ(13,"div",8)(14,"table",9)(15,"thead")(16,"th"),e._uU(17,"Usu\xe1rio"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Cliente"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"A\xe7\xe3o"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Valor"),e.qZA()(),e.TgZ(24,"tbody"),e.YNc(25,V,10,7,"tr",10),e.qZA()()()()()()()),2&t&&(e.xp6(9),e.Oqu(i.nome),e.xp6(2),e.Q6J("routerLink",e.VKq(3,J,i.id)),e.xp6(14),e.Q6J("ngForOf",i.compras))},dependencies:[p.y,u.sg,c.yS,u.H9]}),o})()},{path:"buy-sell/:id",component:(()=>{class o{constructor(t,i,r,a,m){this._buyService=t,this._imovelService=i,this._activateRouter=r,this._location=a,this._notificationService=m,this.subtitle="Compra ou Venda"}ngOnInit(){this.id=this._activateRouter.snapshot.params.id,this.form=new n.cw({usuario:new n.NI(1,{validators:[n.kI.required]}),imovel:new n.NI(Number(this.id),{validators:[n.kI.required]}),value:new n.NI(void 0,{validators:[n.kI.required]}),cliente:new n.NI(void 0,{validators:[n.kI.required]}),acao:new n.NI(void 0,{validators:[n.kI.required]})}),this.buscarImovel()}submit(){this._buyService.create(this.form.value).subscribe(t=>{this._notificationService.notify(t.msg),this._location.back()})}buscarImovel(){this._imovelService.readId(this.id).subscribe(t=>{this.imovel=t,this.nome=this.imovel.name,this.form.controls.value.setValue(this.imovel.value)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T),e.Y36(d),e.Y36(c.gz),e.Y36(u.Ye),e.Y36(C.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-buy-form"]],decls:24,vars:4,consts:[["title","Im\xf3veis",3,"subtitle"],[3,"title"],[1,"col-md-6"],["role","form",3,"formGroup","submit"],[1,"box-body"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","prefix","R$ ","mask","separator.2","thousandSeparator",".","placeholder","Digite o valor","formControlName","value",1,"form-control"],["formControlName","acao","placeholder","Escolha a a\xe7\xe3o",1,"form-control"],["value","C"],["value","V"],["type","text","placeholder","Informe o cliente","formControlName","cliente",1,"form-control"],[1,"box-footer"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,i){1&t&&(e._UZ(0,"app-bradcrumb",0),e.TgZ(1,"app-body",1)(2,"div",2)(3,"form",3),e.NdJ("submit",function(){return i.submit()}),e.TgZ(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"Valor"),e.qZA(),e._UZ(8,"input",7),e.qZA(),e.TgZ(9,"div",5)(10,"label",6),e._uU(11,"A\xe7\xe3o"),e.qZA(),e.TgZ(12,"select",8)(13,"option",9),e._uU(14,"Compra"),e.qZA(),e.TgZ(15,"option",10),e._uU(16,"Venda"),e.qZA()()(),e.TgZ(17,"div",5)(18,"label",6),e._uU(19,"Cliente"),e.qZA(),e._UZ(20,"input",11),e.qZA()(),e.TgZ(21,"div",12)(22,"button",13),e._uU(23,"Submit"),e.qZA()()()()()),2&t&&(e.Q6J("subtitle",i.subtitle),e.xp6(1),e.Q6J("title",i.nome),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(19),e.Q6J("disabled",i.form.invalid))},dependencies:[f.O,p.y,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.sg,n.u,y.hx]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[A.m,c.Bz.forChild(Y)]}),o})()}}]);